* ğŸ¬ ÅšCIÄ„GA â€” Keyboard macro (dwa okna, kopiowanie linii)

** Cel:
SkopiowaÄ‡ bieÅ¼Ä…cÄ… liniÄ™ z lewego okna do prawego okna,
nagrywaÄ‡ jako makro,
zapisaÄ‡ makro do pliku na przyszÅ‚oÅ›Ä‡.
** KROK 0 â€” przygotowanie (stan poczÄ…tkowy)

Emacs ma dwa okna

w lewym oknie: plik ÅºrÃ³dÅ‚owy

w prawym oknie: plik docelowy

kursor stoi na linii do skopiowania w lewym oknie

âš ï¸ Makro nagrywa ruchy i klawisze, nie â€logikÄ™â€ â€“ zaczynaj zawsze z tego samego stanu.

** KROK 1 â€” rozpoczÄ™cie nagrywania makra
F3
Emacs zaczyna nagrywaÄ‡ wszystko, co zrobisz od teraz.

** KROK 2 â€” wykonaj czynnoÅ›ci (dokÅ‚adnie w tej kolejnoÅ›ci)
*** 2.1 Skopiuj bieÅ¼Ä…cÄ… liniÄ™ (kill-line)
C-a    ; przejdÅº na poczÄ…tek linii
C-k    ; wytnij liniÄ™ (trafia do kill-ring)

*** 2.2 PrzejdÅº do prawego okna
C-x o
Emacs przeÅ‚Ä…cza fokus na drugie okno.

*** 2.3 Wklej liniÄ™
C-y
Wklejenie zawartoÅ›ci z kill-ring.

*** 2.4 WrÃ³Ä‡ do lewego okna
C-x o
WaÅ¼ne: makro zawsze koÅ„czy siÄ™ w tym samym oknie, w ktÃ³rym zaczÄ™Å‚o.

** KROK 3 â€” zakoÅ„czenie nagrywania makra
F4
Makro jest teraz zapisane jako â€last keyboard macroâ€.

** KROK 4 â€” uÅ¼ycie makra
Jedno wykonanie:
F4
Wiele wykonaÅ„ (np. 10 linii):
C-u 10 F4
Makro powtÃ³rzy sekwencjÄ™ linia po linii, zawsze lewy â†’ prawy.

** KROK 5 â€” nadanie nazwy makru (Å¼eby Å¼yÅ‚o dalej)
M-x name-last-kbd-macro
Podaj nazwÄ™, np.:
copy-line-left-to-right
Od teraz to jest normalna komenda Emacsa:
M-x copy-line-left-to-right

** KROK 6 â€” zapis makra do pliku (na przyszÅ‚oÅ›Ä‡)

1ï¸âƒ£ PrzejdÅº do pliku, gdzie trzymasz swoje makra
(np. ~/.emacs.d/lisp/buffer-macros.el albo kbd-macros.el)

2ï¸âƒ£ Wstaw kod makra:

M-x insert-kbd-macro
Wybierz:
copy-line-left-to-right

Emacs wstawi kod w stylu:
(fset 'copy-line-left-to-right
   (kmacro-lambda-form
    [C-a C-k C-x o C-y C-x o] 0 "%d"))
Po restarcie Emacsa makro dziaÅ‚a dalej.
