#+title: Bluetooth audio – słuchawki widoczne, ale nie chcą się połączyć
#+date: 03-02-2026
#+tags: bluetooth audio pipewire nixos

* Problem
- System *widzi* słuchawki Bluetooth
- Próba połączenia kończy się niepowodzeniem
- Brak dźwięku lub brak connect

* Szybka procedura (działa w ~90% przypadków)

** 1. Tryb parowania w słuchawkach
- Wyłączyć słuchawki
- Przytrzymać *Power* ~5–7 sekund
- Dioda musi *szybko migać* (tryb parowania)
- Jeśli były połączone z innym urządzeniem → ten krok jest kluczowy

** 2. Usunięcie starego parowania w systemie
#+begin_src shell
bluetoothctl
#+end_src

W środku:
#+begin_example
power on
agent on
default-agent
devices
remove XX:XX:XX:XX:XX:XX
scan on
pair XX:XX:XX:XX:XX:XX
connect XX:XX:XX:XX:XX:XX
trust XX:XX:XX:XX:XX:XX
exit
#+end_example

(Użyć adresu MAC słuchawek z listy `devices`)

** 3. Restart audio + Bluetooth (bez rebootu)
#+begin_src shell
systemctl --user restart pipewire pipewire-pulse wireplumber
systemctl restart bluetooth
#+end_src

Odczekać 10–15 sekund i spróbować połączyć ponownie.

** 4. Sprawdzenie profilu audio (bardzo ważne)
#+begin_src shell
pavucontrol
#+end_src

- Zakładka *Configuration*
- Wybrać: *A2DP Sink*
- Nie używać: *HSP / HFP* (profil rozmów, nie audio)

* Jeśli nadal nie działa
Sprawdzić logi Bluetooth:
#+begin_src shell
journalctl -u bluetooth --no-pager -n 50
#+end_src

Typowe błędy:
- org.bluez.Error.Failed
- Authentication Failed
- Protocol not available

* Mentalna ściąga
- Widoczne, ale nie łączy → stare parowanie
- Połączone, ale cisza → zły profil (nie A2DP)
- Często pomaga restart pipewire / wireplumber
