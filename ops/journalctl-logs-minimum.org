#+TITLE: Logi â€” journalctl (minimum, ktÃ³re dziaÅ‚a)
#+STARTUP: showall

Ta Å›ciÄ…ga pokazuje, jak szybko znaleÅºÄ‡ przyczynÄ™ problemu
w logach systemowych NixOS â€” bez zalewania siÄ™ szumem.

* Cel
- wiedzieÄ‡ GDZIE patrzeÄ‡
- wiedzieÄ‡ JAK zawÄ™Å¼aÄ‡
- nie zgubiÄ‡ siÄ™ w szumie

* Mentalny model
- journalctl = jedno ÅºrÃ³dÅ‚o prawdy
- najpierw zawÄ™Å¼aj, potem czytaj
- szukasz bÅ‚Ä™dÃ³w i momentu, nie caÅ‚ej historii Å›wiata

* NajczÄ™stsze: co poszÅ‚o nie tak teraz
#+begin_src bash
journalctl -p err -b
#+end_src

- -p err â†’ tylko bÅ‚Ä™dy
- -b â†’ tylko bieÅ¼Ä…cy boot

ğŸ‘‰ pierwszy strzaÅ‚ w ~80% przypadkÃ³w

* Poprzedni boot (po rollbacku / crashu)
#+begin_src bash
journalctl -p err -b -1
#+end_src

- -1 = poprzedni start systemu

* Czytanie na Å¼ywo
#+begin_src bash
journalctl -f
#+end_src

- odpowiednik tail -f
- dobre przy restarcie usÅ‚ugi

* Logi konkretnej usÅ‚ugi
#+begin_src bash
journalctl -u NetworkManager
journalctl -u sshd
#+end_src

Z bieÅ¼Ä…cego bootu:
#+begin_src bash
journalctl -u NetworkManager -b
#+end_src

* Od konkretnego momentu
#+begin_src bash
journalctl --since "10 minutes ago"
journalctl --since "2025-12-17 10:00"
#+end_src

* Szukanie tekstu w logach
#+begin_src bash
journalctl | rg error
journalctl -b | rg fail
#+end_src

ğŸ‘‰ Å‚Ä…cz z rg, nie czytaj rÄ™cznie

* Logi tylko z obecnego uÅ¼ytkownika
#+begin_src bash
journalctl --user
journalctl --user -b
#+end_src

Przydatne dla:
- sesji graficznej
- narzÄ™dzi uÅ¼ytkownika

* NajczÄ™stsze wzorce problemÃ³w
Szukaj sÅ‚Ã³w:
- failed
- denied
- timeout
- not found
- dependency failed

* Typowy flow diagnostyczny
1.
#+begin_src bash
journalctl -p err -b
#+end_src
2. Zobacz nazwÄ™ usÅ‚ugi
3.
#+begin_src bash
journalctl -u <usÅ‚uga> -b
#+end_src
4. Po reboocie:
#+begin_src bash
journalctl -p err -b -1
#+end_src

* Czego NIE robiÄ‡
- journalctl bez filtrÃ³w
- czytanie godzinami
- poprawianie configu bez zrozumienia bÅ‚Ä™du

* Absolutne minimum
#+begin_src bash
journalctl -p err -b
journalctl -u <usÅ‚uga> -b
journalctl -p err -b -1
#+end_src

To wystarczy, Å¼eby czytaÄ‡ logi skutecznie,
a nie heroicznie.
